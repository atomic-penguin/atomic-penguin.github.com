
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>2 Cent Tip - Dynamic rdesktop resolution. - </title>
  <meta name="author" content="">

  
  <meta name="description" content="So occasionally I do have to touch a Windows system, or use a Windows-only management tool (I&#8217;m looking at you VMware). Not that I have any p...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="/2010/06/28/2-cent-tip-dynamic-rdesktop-resolution.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="" rel="alternate" title="" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"></a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <p>So occasionally I do have to touch a Windows system, or use a Windows-only management tool (I&#8217;m looking at you VMware). Not that I have any problem with Microsoft or Windows, I&#8217;m really just more comfortable in a Unix-like environment. I do use the Open Source <code>rdesktop</code> utility to access Windows machine using version 5.0 of the Remote Desktop Protocol (RDP).</p>

<p>It&#8217;s a handy utility, but I really wish it would give me an appropriate resolution based on the current resolution of my laptop&#8217;s X Windows session. There is, in fact, a command line flag to alter the geometry of the remote desktop window. However, typing in <code>rdesktop -g 1280x1024</code> is much more tedious than typing in <code>rdesktop</code> on the command line interface.</p>

<p>So the simple solution is to put an alias in the <code>.bashrc</code> file, like so&#8230;</p>
<div>
  <pre><code class='bash'># ~/.bashrc
    rdesktop='rdesktop -g 1280x1024'</code></pre>
</div>
<p>However, on my laptop, the max resolution without an external monitor is 1600x900. So I still have to override the setting with <code>rdesktop -g 1280x1024</code> on the command line, any time I am running without an external monitor.</p>

<p>Another solution would be to use <code>awk</code> to find a smaller resolution from <code>xrandr</code>, then set that resolution in my <code>rdesktop</code> alias.</p>
<div>
  <pre><code class='bash'># ~/.bashrc
    RDESKTOP_SIZE=`xrandr | awk '{getline; getline; getline; print $1; exit;}'`

    alias rdesktop='rdesktop -g $RDESKTOP_SIZE'</code></pre>
</div>
<p>This <code>awk</code> command will skip the first three lines, from the xrandr output. That is two header lines, and the maximum resolution on the following line, which we&#8217;ll skip. I&#8217;ll take the next highest resolution and set that in the variable RDESKTOP_SIZE. Finally, I&#8217;ll use the variable <code>$RDESKTOP_SIZE</code> with the <code>-g</code> switch in <code>rdesktop</code> to properly set my alias.</p>

<p>Let us say you have two big monitors plugged into a port replicator. Perhaps you only want the <code>rdesktop</code> window to cover part of one screen. The following code will keep my <code>rdesktop</code> window smaller than one of the 1920x1200 screens on a spanned 3840x1200 resolution.</p>
<div>
  <pre><code class='bash'># ~/.bashrc
    RDESKTOP_SIZE=`xrandr | awk '{getline; getline; getline; print $1; exit;}'`

    if [ $RDESKTOP_SIZE == &quot;3840x1200&quot; ]; then
        RDESKTOP_SIZE=&quot;1820x1100&quot;
    fi

    alias rdesktop='rdesktop -g $RDESKTOP_SIZE'</code></pre>
</div>
<p>In other words, if I have two monitors at 1920x1200 each, their combined resolution is reported by <code>xrandr</code> as 3840x1200. I want to override the detected resolution to 100 pixels less than the resolution on one screen. Therefore I set the <code>$RDESKTOP_SIZE</code> variable to 1820x1100, before setting my <code>rdesktop</code> alias in <code>.bashrc</code>.</p>
    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 -  -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
