
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>atomic-penguin's blog</title>
  <meta name="author" content="Eric G. Wolfe">

  
  <meta name="description" content="I have been playing around with test-kitchen
more recently. One of the community members suggested I embed an encrypted data_bag
into the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://atomic-penguin.github.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="atomic-penguin's blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">atomic-penguin's blog</a></h1>
  
    <h2>Musings on Linux, Opscode Chef, online gaming, and home cooking.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:atomic-penguin.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/07/HOWTO-test-kitchen-and-encrypted-data-bags/">HOWTO Test-kitchen and Encrypted Data Bags</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-07T15:58:00-04:00" pubdate data-updated="true">Jun 7<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have been playing around with <a href="https://github.com/opscode/test-kitchen">test-kitchen</a>
more recently.  One of the community members suggested I embed an encrypted data_bag
into the certificates cookbook for integration testing with test-kitchen.</p>

<p>Following, is the process used to set up test-kitchen for encrypted data_bag
use.  This documentation might be useful to others trying to integrate encrypted
data_bag testing into their cookbooks.</p>

<h3>Warning</h3>

<p>Encrypted data_bag files placed in <code>test/integration</code> should not be used in production.
Files include a self-signed &#8220;snake oil&#8221; certificate/key and an encrypted_data_bag_secret file
which are not secure to use beyond testing purposes.</p>

<h3>Initialize test-kitchen</h3>

<p>Run the following to create a <code>.kitchen.yml</code> file in your cookbook directory.</p>

<pre><code>$ cd &lt;cookbook dir&gt;
$ kitchen init
</code></pre>

<p>This <code>kitchen init</code> command will yield a file which looks like this:</p>

<pre><code>---
driver_plugin: vagrant
driver_config:
  require_chef_omnibus: true

platforms:
- name: ubuntu-12.04
  driver_config:
    box: opscode-ubuntu-12.04
    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_ubuntu-12.04_provisionerless.box
- name: ubuntu-10.04
  driver_config:
     box: opscode-ubuntu-10.04
     box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_ubuntu-10.04_provisionerless.box
- name: centos-6.4
  driver_config:
    box: opscode-centos-6.4
    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_centos-6.4_provisionerless.box
- name: centos-5.9
  driver_config:
    box: opscode-centos-5.9
    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_centos-5.9_provisionerless.box

suites:
- name: default
  run_list: ["recipe[certificate::default]"]                                                                                                                                    
  attributes: {}
</code></pre>

<h3>Data bag and secret file setup</h3>

<p>The test-kitchen initialization should create a <code>test/integration/default</code> directory.
As of test-kitchen pull request #124, cookbook files are aggressively filtered from being
copied to the chef-solo working directory.  Adding these files to the <code>suite</code> section of the
<code>.kitchen.yml</code> will ensure those files get copied over for your integration testing.</p>

<p>First, create a throwaway secret to encrypt testing data.</p>

<pre><code>openssl rand -base64 512 &gt; test/integration/default/encrypted_data_bag_secret
</code></pre>

<p>Second, create an encrypted data bag with test data.  Apparently there is also
a <a href="https://github.com/thbishop/knife-solo_data_bag">knife-solo_data_bag</a> knife
plugin which can be used alternatively.</p>

<pre><code>knife data bag create certificates test --secret-file test/integration/default/encrypted_data_bag_secret
</code></pre>

<p>Copy and paste the encrypted data bag object into a file.</p>

<pre><code># Make a data_bag directory
mkdir -p test/integration/default/data_bags/certificates

# Copy the encrypted json output
knife data bag show certificates test -Fj

# Paste the encrypted json output into a json file
cat &gt; test/integration/default/data_bags/certificates/test.json
</code></pre>

<h3>Configure test-kitchen</h3>

<p>Edit the suites section in the <code>.kitchen.yml</code> and add <code>encrypted_data_bag_secret_key_path</code>
and <code>data_bag_path</code>.</p>

<p>Default generated configuration.</p>

<pre><code>suites:
- name: default
 run_list: ["recipe[certificate::default]"]
  attributes: {}
</code></pre>

<p>Configuration for test-kitchen with encrypted data bags.</p>

<pre><code>suites:
- name: default
  data_bag_path: "test/integration/default/data_bags"
  encrypted_data_bag_secret_key_path: "test/integration/default/encrypted_data_bag_secret"
  run_list: ["recipe[certificate::default]"]
  attributes: {}
</code></pre>

<p>That should be all you need to run test-kitchen integration tests
with encrypted data bags.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/25/Multi-Knife-HOWTO/">Multi-knife HOWTO</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-25T20:26:00-04:00" pubdate data-updated="true">Apr 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Overview</h1>

<p>  Here is an example shared configuration for knife, the command and control utility which ships with Opscode Chef.  You can drop this off in your <code>chef-repo/.chef/</code> directory, and multiple developers can use the same knife configuration to interact with more than one Chef server, or the Opscode platform.</p>

<p>  By using Bash functions and environment variables we can change the chef server, which knife is configured to use, on the fly.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/04/25/Multi-Knife-HOWTO/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/15/disabling-verticalsync-in-kde-for-steam4linux-beta/">Disabling VerticalSync in KDE for Steam4Linux Beta</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-15T10:16:00-05:00" pubdate data-updated="true">Jan 15<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>According to <a href="http://en.wikipedia.org/wiki/Screen_tearing#V-sync">Wikipedia</a>,
Vertical synchronization (or VerticalSync) is</p>

<p><code>an option in most systems, wherein the video card is prevented from doing anything visible to the
display memory until after the monitor finishes its current refresh cycle.</code></p>

<p>In layman&#8217;s terms, when Vertical synchronization is turned on, many aspects
of video processing are locked to the reported refresh rate of your display
hardware.  In other words, if your fancy LCD screen reports 60 Hz. is its own
supported refresh rate, then games or video playback will be capped at 60 frames
per second when Vertical synchronization is turned on.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/01/15/disabling-verticalsync-in-kde-for-steam4linux-beta/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/14/mini-howto-building-a-deb-package-for-beta-nvidia-drivers/">Mini-HOWTO: Building a Deb Package for Beta NVidia Drivers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-14T12:12:00-05:00" pubdate data-updated="true">Dec 14<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Since the first week of this last November, the closed <a href="http://steamcommunity.com/linux">Linux Steam beta</a>
has been underway.  I think the latest official count of Linux beta
users is somewhere near 80,000 gamers.  That is a pretty impressive
closed beta headcount considering that is more than 1% of the active
5 million users who use Steam daily.  It is really an exciting time
for all the Linux desktop users.  As the introduction of Steam
has encouraged GPU OEMs to improve their Linux video drivers.  Also,
some of the game developers participating in the Linux beta have been
supporting their customers and fixing bugs, even for those not
officially included in the closed beta program.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/12/14/mini-howto-building-a-deb-package-for-beta-nvidia-drivers/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/08/atomic-penguins-feel-good-chili/">Atomic Penguins Feel Good Chili</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-08T00:00:00-04:00" pubdate data-updated="true">Sep 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When I am not writing Opschef cookbooks, I do enjoy real cooking in my spare time.  I have been down and out with a bit of a cold for the last week.  With it getting colder outside and with me feeling a bit better today, I decided to make a big pot of chili.</p>

<p>There is just something about having a big pot stewing and making your house smell homey, like a big pot of soup, which can make you feel better.  Capsaicin, the magical stuff which make peppers hot, is thought to break up congestion, to help clear up your sinuses, and helps with the management of pain.  So some spicy Chili certainly can&#8217;t hurt, especially given the cold I have suffered through this week.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/09/08/atomic-penguins-feel-good-chili/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/12/Foodfight-17-Testing-with-Eric-and-Fletcher/">Foodfight Podcast - Episode 17, Testing With Eric G. Wolfe & Fletcher Nichol</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-12T00:00:00-04:00" pubdate data-updated="true">Jun 12<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I had such a blast at the inaugural Chefconf in San Francisco, CA.  This was my first time visiting the area, I had a chance to visit the <a href="https://plus.google.com/112791157300091682319/posts/2Dr6BMnBqHH">Alcatraz</a> prison.  I also drank a lot of <a href="http://www.anchorbrewing.com/beer/anchor_steam">Anchor Steam</a>, while pair programming with <a href="http://twitter.com/#!fnichol">Fletcher Nichol</a> to make the NTP cookbook a reference cookbook for testing Chef recipes.</p>

<p>During my second appearance on the Food Fight show, we covered what we hacked on throughout Chefconf with regard to Travis CI automated testing.  We also talked a bit about what we are doing internally with Jenkins to test our cookbook code.  Here is the link to the podcast <a href="http://traffic.libsyn.com/foodfight/FoodFightShowEpisode17.mp3">audio</a> and also the show <a href="http://foodfightshow.org/2012/06/episode-17-testing-with-eric-g-wolfe.html">notes</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/04/HOWTO-simple-kvm-virtualization-a-command-line-demonstration/">HOWTO (Video) Simple KVM Virtualization, a Command Line Demonstration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-04T00:00:00-04:00" pubdate data-updated="true">Apr 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A simple demonstration using KVM (Kernel-based Virtual Machine) from the command line interface.</p>

<p>Sorry for the slight graphics artefacts, I was testing out some screencast software for the first time.</p>

<p>Watch it on youtube, <a href="http://www.youtube.com/watch?v=aN8lb2O-wHs">here</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/15/Foodfight-1-Chef-in-2012/">Foodfight Podcast - Episode 1, Chef in 2012</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-15T00:00:00-05:00" pubdate data-updated="true">Jan 15<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was really excited to be part of the first community podcast for Opscode Chef, <a href="http://foodfightshow.org">Food Fight</a>.  Here is a link to the podcast <a href="http://traffic.libsyn.com/foodfight/ff_ep01_2.mp3">audio</a> and also the show <a href="http://foodfightshow.org/2012/01/episode-1-chef-in-2012.html">notes</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/06/MU-case-study/">Marshall University Case Study</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-06T00:00:00-04:00" pubdate data-updated="true">Sep 6<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Our System Administration team colloborated with <a href="http://www.ospcode.com/">Opscode</a> to put together a Case Study detailing our use of their System automation framework, Opscode Chef.</p>

<p>Case Study: Opscode + Marshall University <a href="http://www.opscode.com/customers/marshall/">web</a> <a href="http://www.opscode.com/case-studies/opscode-case-study-marshall.pdf">pdf</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/11/2-cent-linux-tip-using-find-and-tar-for-a-selective-backup/">2 Cent Linux Tip Using Find and Tar for a Selective Backup</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-11T00:00:00-04:00" pubdate data-updated="true">Jul 11<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I&#39;m blowing away, and re-installing, my Steam Bottle on <a href="http://codeweavers.com">Codeweaver&#39;s</a> Crossover games.  I was hoping to get some in-game overlay support for the Community/Friends features of Steam.  I really really want to hang on to Team Fortress/Left 4 Dead settings though.</p>

<p>Using the <code>find</code> command we can solve this problem fairly easy.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2011/07/11/2-cent-linux-tip-using-find-and-tar-for-a-selective-backup/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/06/07/HOWTO-test-kitchen-and-encrypted-data-bags/">HOWTO test-kitchen and encrypted data bags</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/25/Multi-Knife-HOWTO/">Multi-knife HOWTO</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/15/disabling-verticalsync-in-kde-for-steam4linux-beta/">Disabling VerticalSync in KDE for Steam4Linux Beta</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/14/mini-howto-building-a-deb-package-for-beta-nvidia-drivers/">Mini-HOWTO: Building a deb package for Beta NVidia drivers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/08/atomic-penguins-feel-good-chili/">Atomic Penguins Feel Good Chili</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/atomic-penguin">@atomic-penguin</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'atomic-penguin',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("atomic_penguin", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/atomic_penguin" class="twitter-follow-button" data-show-count="false">Follow @atomic_penguin</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/112791157300091682319?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section class="linkedin">
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/MemberProfile" data-id="http://www.linkedin.com/in/ericgwolfe" data-format="click" data-text="Eric G. Wolfe" data-related="false"></script>
<a href="http://resume.linkedinlabs.com/o1x0n1fiy">Résumé</a>
</section>


<section class="steam">
  <a href="http://steamcommunity.com/atomic-penguin"><img src="/images/steam.png" width="32" height="32" style="border: 0px;">atomic-penguin on Steam</a>
</section>


<section>
  <h1>About Me</h1>
  <img src="/images/profile.png" style="border: 0px;">
  <p>Hello, Eric G. Wolfe, here. I am a Senior Linux Administrator at <a href="http://www.marshall.edu">Marshall University.</a> You might know me as atomic-penguin from various corners of the Internet.</p>
  <p>I have been quite enamored with computers since I was very young. I am quite lucky to get paid to work on something I really enjoy doing. In the course of my everyday job, I have been fortunate enough to contribute Open Source bugfixes to the <a href="http://www.opscode.com">Opscode Chef</a> <a href="https://github.com/opscode-cookbooks">COOK project</a>.</p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Eric G. Wolfe -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'atomicpenguin';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
